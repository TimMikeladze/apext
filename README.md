![apextgithub](https://user-images.githubusercontent.com/71573508/182018691-edc8aa18-04a4-4976-bdae-890ada85cc1f.png)

# APEXT

<sup>pronounced */e…™pekst/*<sup>

A simple CLI tool to output all your Next.js API routes in your console.

<sup>Inspired by the [Laravel Artisan `route:list` Command](https://stillat.com/blog/2016/12/07/laravel-artisan-route-command-the-routelist-command)<sup>

### ‚ö†Ô∏è For now it is macOS only ‚ö†Ô∏è

# Install

```bash
brew install lifespikes/apext/apext
```

# API (Commands)

### üéØ `list`

Place yourself on your Next.js root directory and run `apext list`

### Flags:

`--path` - **optional** (will output a specific path routes, `/api` is default)


### Example:

```bash
apext list --path=auth
```

### Extra:

Get your route http methods outputted adding the `// @methods` comment. When you use `apext create` to create a new route, it will bring the `// @methods` comment added. Check the command `create` below.

```js
// my-route.ts

// @methods [GET, POST, PUT, DELETE]

// ...rest of the file
```


### üéØ `create`

Will create an API endpoint following a REST structure.

### Argument:

`<name>` - **required** (the name of your API endpoint)

### Flags:

`--path` - **optional** (`/api` folder is default)

`--ts` - **optional** (`.js` file is generated by default)


### Example:

```bash
apext create login --path=auth --ts
```

### Notes:

1. When stating a `--path` you can create nested directories like `organization/public`.
2. If a folder does not exists, APEXT will create the folder for you.
3. If a file with that name already exists it will override the existing file.

### Output file (typescript):

```ts
import type { NextApiRequest, NextApiResponse } from 'next'

// APEXT methods comment üëá
// @methods [GET, POST, PUT, DELETE]

export default async function name(
  req: NextApiRequest,
  res: NextApiResponse
) {
  switch (req.method) {
    case 'GET':
    case 'POST':
    case 'PUT':    
    case 'DELETE':
    default:
      res.setHeader('Allow', [
        'GET',
        'POST',
        'PUT',
        'DELETE',
    ])
      return res.status(405).end(`Method ${req.method} Not Allowed`)
  }
}
```

# DEMO 

![output](https://user-images.githubusercontent.com/71573508/182311928-350ebae4-308a-455a-935b-d522fa4dbc0b.gif)
